<!DOCTYPE html>
<head>

  
            <title>The base uri - sabre/dav</title>
    
    <meta charset="utf-8">

    <link rel="alternate" type="application/atom+xml" href="http://sabre.io/atom.xml" title="sabre.io blog" />
    <link rel="shortcut icon" href="http://sabre.io/favicon.ico" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:100,700,300,400" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
            <link rel="stylesheet" type="text/css" href="http://sabre.io/css/sabre.css" />
    
</head>
<body >
    <header class="pagehead">

    <div class="pagehead-inner">
        <a class="logo" href="http://sabre.io/">
            <img src="http://sabre.io/img/logo.png" alt="sabre/dav">
            sabre<span>/dav</span>
        </a>

        <nav class="nav nav--page">
            <ul>
                <li class="size-auto"></li>
                <li><a href="http://sabre.io/dav">Docs</a></li>
                <li><a href="http://sabre.io/blog">Blog</a></li>
                <li><a href="http://sabre.io/support">Support</a></li>
                <li class="size-auto text--right"><a href="https://github.com/fruux?query=sabre"><i class="fa fa-github"></i></a></li>
                <!-- <li><a href="http://sabre.io/atom.xml"><i class="fa fa-rss"></i></a> <a href="https://twitter.com/sabredav"><i class="fa fa-twitter"></i></a></li> -->
            </ul>
        </nav>

    </div>

</header>

            <input class="hamburger-input" type="checkbox" id="nav-check" name="nav-check">
        <label class="hamburger-label" for="nav-check"><i class="fa fa-bars"></i></label>
    
        <main class="incl-sidebar">
                    <aside class="sidebar">
    <nav class="nav nav--sidebar">
        <ul class="list list--nav">
            <li><a href="http://sabre.io/dav">sabre/dav</a>
                                <ul>
                    <li><a href="http://sabre.io/dav/install">Installation</a></li>
                    <li><a href="http://sabre.io/dav/upgrading">Upgrading</a></li>
                    <li><a href="http://sabre.io/dav/gettingstarted">Getting Started</a></li>
                    <li>Troubleshooting
                        <ul>
                            <li><a href="http://sabre.io/dav/faq">FAQ</a></li>
                            <li><a href="http://sabre.io/dav/clients">Clients</a></li>
                            <li><a href="http://sabre.io/dav/webservers">Webservers</a></li>
                        </ul>
                    </li>
                    <li>CalDAV
                        <ul>
                            <li><a href="http://sabre.io/dav/caldav">Getting started</a></li>
                            <li><a href="http://sabre.io/dav/building-a-caldav-client">Building a CalDAV client</a></li>
                            <li><a href="http://sabre.io/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                            <li><a href="http://sabre.io/dav/caldav-proxy">Delegation</a></li>
                            <li><a href="http://sabre.io/dav/caldav-sharing">Calendar sharing</a></li>
                            <li><a href="http://sabre.io/dav/ics-export-plugin">iCalendar export</a></li>
                            <li><a href="http://sabre.io/dav/scheduling">Scheduling</a></li>
                            <li><a href="http://sabre.io/dav/service-discovery">Service Discovery</a></li>
                        </ul>
                    </li>
                    <li>CardDAV
                        <ul>
                            <li><a href="http://sabre.io/dav/carddav">Getting started</a></li>
                            <li><a href="http://sabre.io/dav/building-a-carddav-client">Building a CardDAV client</a></li>
                            <li><a href="http://sabre.io/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                            <li><a href="http://sabre.io/dav/carddav-directory">CardDAV Directory</a></li>
                            <li><a href="http://sabre.io/dav/vcf-export-plugin">vCard export</a></li>
                            <li><a href="http://sabre.io/dav/service-discovery">Service Discovery</a></li>
                        </ul>
                    </li>
                    <li>Other topics
                        <ul>
                            <li><a href="http://sabre.io/dav/acl">Acl</a></li>
                            <li><a href="http://sabre.io/dav/authentication">Authentication</a></li>
                            <li><a href="http://sabre.io/dav/character-encoding">Character encoding</a></li>
                            <li><a href="http://sabre.io/dav/browser-plugin">Directory indexes</a></li>
                            <li><a href="http://sabre.io/dav/davmount">DavMount</a></li>
                            <li><a href="http://sabre.io/dav/guesscontenttype">Content Types</a></li>
                            <li><a href="http://sabre.io/dav/http-patch">PATCH support</a></li>
                            <li><a href="http://sabre.io/dav/large-files">Large files</a></li>
                            <li><a href="http://sabre.io/dav/litmus">Litmus</a></li>
                            <li><a href="http://sabre.io/dav/locks">Locks</a></li>
                            <li><a href="http://sabre.io/dav/plugins">Plugins</a></li>
                            <li><a href="http://sabre.io/dav/per-user-directories/">Per-user directories</a></li>
                            <li><a href="http://sabre.io/dav/properties">Properties</a></li>
                            <li><a href="http://sabre.io/dav/property-storage">Property storage</a></li>
                            <li><a href="http://sabre.io/dav/scalability">Scalability</a></li>
                            <li><a href="http://sabre.io/dav/simplecollection">SimpleCollection</a></li>
                            <li><a href="http://sabre.io/dav/standards-support">Standards Support</a></li>
                            <li><a href="http://sabre.io/dav/temporary-files">Temporary Files</a></li>
                            <li><a href="http://sabre.io/dav/versioning">Versioning</a></li>
                            <li><a href="http://sabre.io/dav/virtual-filesystems">Virtual filesystems</a></li>
                            <li><a href="http://sabre.io/dav/davclient">WebDAV client</a></li>
                            <li><a href="http://sabre.io/dav/sync">WebDAV sync</a></li>
                            <li><a href="http://sabre.io/dav/writing-plugins">Writing Plugins</a></li>
                            <li><a href="http://sabre.io/dav/xmlelements">XML Elements</a></li>
                        </ul>
                    </li>
                </ul>
                            </li>
            <li><a href="http://sabre.io/event">sabre/event</a>
                            </li>
            <li><a href="http://sabre.io/http">sabre/http</a>
                            </li>
            <li><a href="http://sabre.io/vobject">sabre/vobject</a>
                            </li>
            <li><a href="http://sabre.io/xml">sabre/xml</a>
                            </li>
            <li><a href="http://sabre.io/uri">sabre/uri</a>
                            </li>
            <li><a href="http://sabre.io/license">License</a></li>
        </ul>
    </nav>
</aside>
                <article>
                            <h1>The base uri</h1>
                <p>This document exists to explain the number one problem people have with
sabre/dav: setting a correct base uri.</p>

<p>Often after you set up any Cal-, Card- or WebDAV server, you may get an error
like this:</p>

<pre><code>&lt;d:error&gt;
  &lt;s:sabredav-version&gt;2.0.4&lt;/s:sabredav-version&gt;
  &lt;s:exception&gt;Sabre\DAV\Exception\NotFound&lt;/s:exception&gt;
  &lt;s:message&gt;File not found: sabredav in 'root'&lt;/s:message&gt;
&lt;/d:error&gt;
</code></pre>

<p>The actual filenames vary, but usually it will be something like that.</p>

<p>This is a short guide to help you figure out how to solve this.</p>

<h2>What is the base URI</h2>

<p>After you install sabredav, you may access your server through a url like
these:</p>

<pre><code>http://server.example.org/sabredav/server.php
http://server.example.org/sabredav/calendarserver.php
http://server.example.org/sabredav/addressbookserver.php
http://server.example.org/sabredav/groupwareserver.php
</code></pre>

<p>Any of those urls are valid, and it's completely up to you in which directory
you run sabredav, or how you name your 'server file'. We strongly recommend
against calling your server file <code>index.php</code> because this causes additional
confusion. <code>server.php</code> is the best name.</p>

<p>After you set up this file, you need to tell sabredav what this url is.</p>

<p>Every example server file with contain a line such as this:</p>

<pre><code>$server-&gt;setBaseUri(...);
</code></pre>

<p>You need to make sure that whats specified as <code>...</code> here, matches the base
path to your server. For the first 4 examples we showed, the value would
be this:</p>

<pre><code>/sabredav/server.php
/sabredav/calendarserver.php
/sabredav/addressbookserver.php
/sabredav/groupwareserver.php
</code></pre>

<h2>Why is this important?</h2>

<p>In sabredav, a full url may look something like this:</p>

<pre><code>http://server.example.org/sabredav/server.php/files/photo.jpg
</code></pre>

<p>SabreDAV needs to split this up in two components, which are these two:</p>

<pre><code>http://server.example.org/sabredav/server.php
/files/photo.jpg
</code></pre>

<p>SabreDAV only cares about the last part, but it can not easily figure out
where the 'script' ends and where the the other path starts.</p>

<h2>I would like to use clean urls</h2>

<p>It's entirely possible to change this url:</p>

<pre><code>http://server.example.org/server.php/files/photo.jpg
</code></pre>

<p>And use urls like this instead:</p>

<pre><code>http://server.example.org/files/photo.jpg
</code></pre>

<p>But please note that the answer to this, is <em>NOT</em> changing the filename
to index.php.</p>

<p>Instead, you <em>must</em> use 'url rewriting'.</p>

<p>You should only attempt this <em>after</em> you already have sabredav up and running
with an ugly url, as this will reduce the number of potential issues.</p>

<p>Using rewriting for this is different depending on which webserver you use.
For apache, you may have to create a virtual host, and add ruls such as this:</p>

<pre><code>    RewriteEngine On
    # This makes every request go to server.php
    RewriteRule .* /server.php [L]
</code></pre>

<p>If you use .htaccess, it may instead look like this:</p>

<pre><code>    RewriteEngine On
    # This makes every request go to server.php
    RewriteRule .* server.php [L]
</code></pre>

<p>However, configuration is completely different if you use nginx, IIS, or
anything else. Consult your server's manual to figure out how.</p>

<p>After you've made this change, you can change <code>server.php</code> to make the
baseUri look like this:</p>

<pre><code>$server-&gt;setBaseUri('/');
</code></pre>

<p>More information can also be found on the <a href="/dav/webservers/">Web Servers</a> page.</p>
            
            
                            <hr />
                <h2>Comments</h2>
                <div id="disqus_thread"></div>
                    </article>
    </main>
    
    <!-- this is where the ugly bit starts. Stupid javascript :( -->

    <script src="http://sabre.io/components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-2848664-5', 'sabre.io');
ga('send', 'pageview');
</script>

    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'sabredav'; // required: replace example with your forum shortname
    var disqus_identifier = '/dav/baseuri';
    var disqus_title = 'The base uri';
    var disqus_url = 'http://sabre.io/dav/baseuri';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
 </script>

    <footer>

    <nav>
        <ul>
            <li>© 2015 <a href="https://fruux.com">fruux GmbH</a> · </li>
            <li><a href="http://sabre.io/support">Contact</a> · </li>
            <li><a href="http://sabre.io/legal">Legal Info</a></li>
        </ul>
        <ul>
            <li><i class="fa fa-twitter"></i> <a href="http://twitter.com/sabredav">@sabredav</a> · </li>
            <li><a href="http://twitter.com/fruux">@fruux</a></li>
                    </ul>
    </nav>

</footer>

</body>
