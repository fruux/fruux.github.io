<!DOCTYPE html!>
<head>
    <title>sabre/dav</title>

    <link rel="stylesheet" type="text/css" href="/css/sabredav.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:100,700,300,400" type="text/css">
    <link rel="stylesheet" href="/components/highlightjs/styles/github.css" type="text/css" />

    <link rel="shortcut icon" href="/favicon.ico" />

</head>
<body>
    <header>

    <div class="logo">
        <a href="/">
            <img src="/img/logo.png" alt="SabreDAV. A WebDAV framework for PHP.">
            SabreDAV wiki
        </a>
    </div>

    <nav>
        <ul>
            <li><a href="/">sabre/dav</a></li>
            <li><a href="/">sabre/event</a></li>
            <li><a href="/">sabre/http</a></li>
            <li><a href="/">sabre/vobject</a></li>
        </ul>
    </nav>

</header>

    <main>
        <aside>
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/dav/install">Installation</a></li>
        <li><a href="/dav/gettingstarted">Getting Started</a></li>
        <li>
            Troubleshooting
            <ul>
                <li><a href="/dav/faq">FAQ</a></li>
                <li><a href="/dav/clients">Clients</a></li>
                <li><a href="/dav/webservers">Webservers</a></li>
            </ul>
        </li>
        <li>
            CalDAV
            <ul>
                <li><a href="/dav/caldav">Getting started</a></li>
                <li><a href="/dav/building-a-caldav-client">Building a CalDAV client</a></li>
                <li><a href="/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                <li><a href="/dav/caldav-proxy">Delegation</a></li>
                <li><a href="/dav/caldav-sharing">Calendar sharing</a></li>
                <li><a href="/dav/ics-export-plugin">iCalendar export</a></li>
                <li><a href="/dav/imiphandler">iMip Handler</a></li>
            </ul>
        </li>
        <li>
            CardDAV
            <ul>
                <li><a href="/dav/carddav">Getting started</a></li>
                <li><a href="/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                <li><a href="/dav/carddav-directory">CardDAV Directory</a></li>
            </ul>
        </li>
        <li>
            Other topics
            <ul>
                <li><a href="/dav/acl">Acl</a></li>
                <li><a href="/dav/authentication">Authentication</a></li>
                <li><a href="/dav/character-encoding">Character encoding</a></li>
                <li><a href="/dav/browser-plugin">Directory indexes</a></li>
                <li><a href="/dav/davmount">DavMount</a></li>
                <li><a href="/dav/guesscontenttype">Content Types</a></li>
                <li><a href="/dav/plugins">Plugins</a></li>
                <li><a href="/dav/scalability">Scalability</a></li>
                <li><a href="/dav/versioning">Versioning</a></li>
                <li><a href="/dav/virtual-filesystems">Virtual filesystems</a></li>
            </ul>
        </li>
    </ul>
</aside>
        <article>
            <h1>CalDAV</h1>

<p>The CalDAV plugin provides all the logic and extensions to WebDAV to get
calendar-access working.</p>

<p>CalDAV depends on the <a href="dav/acl">ACL</a> plugin to be available too. This document
provides a simple explanation to get your server setup.</p>

<h2>Database setup</h2>

<p>Example sql files are supplied for postgres, sqlite and mysql. The latter two
are officially supported and unittested.</p>

<p>This example assumes you're using sqlite.</p>

<p>Create a 'data' directory where you're going to store the sqlite database.</p>

<pre><code>mkdir data/
cat examples/sql/sqlite.* | sqlite3 data/db.sqlite
</code></pre>

<p>We'll add a calendar for the admin user.</p>

<pre><code>INSERT INTO calendars (principaluri, displayname, uri, description, components, ctag, transparent) VALUES
('principals/admin','default calendar','default','','VEVENT,VTODO','1', '0');
</code></pre>

<p>Now, make sure the data/db.sqlite as well as it's containing directory are
writable by the server. If you are lazy you could just do:</p>

<pre><code>chmod -Rv a+rw data/
</code></pre>

<h2>Create the server endpoint</h2>

<p>Simply run the following:</p>

<pre><code>cp examples/calendarserver.php calendarserver.php
</code></pre>

<h2>Test in browser</h2>

<p>Try opening the full url to your new server. Make sure you append a slash at
the end of the url, without this the request will fail. Example:</p>

<pre><code>http://www.example.org/~evert/sabredav/calendarserver.php/
</code></pre>

<p>This url should prompt you with an authentication dialog. The default username
and password are admin and admin.</p>

<p>Now you can use the url:</p>

<pre><code>http://www.example.org/~evert/sabredav/calendarserver.php/
</code></pre>

<p>for <a href="dav/clients/ical">iCal</a> and <a href="dav/clients/iphone">iPhone</a> (with iOS
version less than 6), or</p>

<pre><code>http://www.example.org/~evert/sabredav/calendarserver.php/principals/admin
</code></pre>

<p>for <a href="dav/clients/iphone">iPhone</a> (with iOS version 6 and up), or</p>

<pre><code>http://www.example.org/~evert/sabredav/calendarserver.php/calendars/admin/default
</code></pre>

<p>for <a href="dav/clients/lightning">Lightning</a> or <a href="dav/clients/evolution">Evolution</a>.</p>

<p>Note that the iCal and iPhone clients can auto-detect the principal url, if
SabreDAV runs at the root of the domain.</p>

<p>For more information about the auto-detection system, read the
<a href="dav/service-discovery">Service discovery documentation</a>.</p>

<h2>Adding users</h2>

<p>SabreDAV does not provide an administrative interface. While this may happen 
in the future, for now SabreDAV is mostly intended for developers. Adding new
users is done directly on the database.</p>

<p>In order to allow a user to log in, add them to the users table. You must also
add them to the principals table to enable calendar access.</p>

<p>Lastly, in order to enable support for calendar-delegation, the
calendar-proxy-read and calendar-proxy-write principals must be added. Look at
the sample .sql files for examples for these records.</p>

<h2>Related topics</h2>

<ul>
<li><a href="/dav/caldav-carddav-integration-guide">Guide for integrating CalDAV &amp; CardDAV in existing infrastructures</a>.</li>
</ul>
        </article>
    </main>

    <script src="/components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-2848664-5', 'sabredav.org');
ga('send', 'pageview');
</script>

    
</body>
