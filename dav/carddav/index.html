<!DOCTYPE html!>
<head>
    <title>sabre/dav</title>

    <link rel="stylesheet" type="text/css" href="/css/sabredav.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:100,700,300,400" type="text/css">
    <link rel="stylesheet" href="/components/highlightjs/styles/github.css" type="text/css" />

    <link rel="shortcut icon" href="/favicon.ico" />

</head>
<body>
    <header>

    <div class="logo">
        <a href="/">
            <img src="/img/logo.png" alt="SabreDAV. A WebDAV framework for PHP.">
            SabreDAV wiki
        </a>
    </div>

    <nav>
        <ul>
            <li><a href="/">sabre/dav</a></li>
            <li><a href="/">sabre/event</a></li>
            <li><a href="/">sabre/http</a></li>
            <li><a href="/">sabre/vobject</a></li>
        </ul>
    </nav>

</header>

    <main>
        <aside>
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/dav/install">Installation</a></li>
        <li><a href="/dav/gettingstarted">Getting Started</a></li>
        <li>
            Troubleshooting
            <ul>
                <li><a href="/dav/faq">FAQ</a></li>
                <li><a href="/dav/clients">Clients</a></li>
                <li><a href="/dav/webservers">Webservers</a></li>
            </ul>
        </li>
        <li>
            CalDAV
            <ul>
                <li><a href="/dav/caldav">Getting started</a></li>
                <li><a href="/dav/building-a-caldav-client">Building a CalDAV client</a></li>
                <li><a href="/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                <li><a href="/dav/caldav-proxy">Delegation</a></li>
                <li><a href="/dav/caldav-sharing">Calendar sharing</a></li>
                <li><a href="/dav/ics-export-plugin">iCalendar export</a></li>
                <li><a href="/dav/imiphandler">iMip Handler</a></li>
            </ul>
        </li>
        <li>
            CardDAV
            <ul>
                <li><a href="/dav/carddav">Getting started</a></li>
                <li><a href="/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                <li><a href="/dav/carddav-directory">CardDAV Directory</a></li>
            </ul>
        </li>
        <li>
            Other topics
            <ul>
                <li><a href="/dav/acl">Acl</a></li>
                <li><a href="/dav/authentication">Authentication</a></li>
                <li><a href="/dav/character-encoding">Character encoding</a></li>
                <li><a href="/dav/browser-plugin">Directory indexes</a></li>
                <li><a href="/dav/davmount">DavMount</a></li>
                <li><a href="/dav/guesscontenttype">Content Types</a></li>
                <li><a href="/dav/plugins">Plugins</a></li>
                <li><a href="/dav/scalability">Scalability</a></li>
                <li><a href="/dav/versioning">Versioning</a></li>
                <li><a href="/dav/virtual-filesystems">Virtual filesystems</a></li>
            </ul>
        </li>
    </ul>
</aside>
        <article>
            <h1>CardDAV</h1>

<p>Since version 1.5, SabreDAV ships with a CardDAV plugin. CardDAV allows for
addressbook-syncing functionality in SabreDAV.</p>

<h2>Database setup</h2>

<p>Example sql files are supplied for postgres, sqlite and mysql. The latter two
are officially supported and unittested.</p>

<p>This example assumes you're using sqlite.</p>

<p>Create a 'data' directory where you're going to store the sqlite database.</p>

<pre><code>mkdir data/
cat examples/sql/sqlite.* | sqlite3 data/db.sqlite
</code></pre>

<p>We'll add 1 addressbook for the admin user.</p>

<pre><code>INSERT INTO addressbooks (principaluri, displayname, uri, description, ctag) VALUES
('principals/admin','default calendar','default','','1');
</code></pre>

<p>Now, make sure the data/db.sqlite as well as it's containing directory are writable by the server. If you are lazy you could just do:</p>

<pre><code>chmod -Rv a+rw data/
</code></pre>

<h2>Create the server endpoint</h2>

<p>Simply run the following:</p>

<pre><code>cp examples/addressbookserver.php addressbookserver.php
</code></pre>

<h2>Test in browser</h2>

<p>Try opening the full url to your new server. Make sure you append a slash at the end of the url, without this the request will fail. Example:</p>

<pre><code>http://www.example.org/~every/sabredav/addressbookserver.php/
</code></pre>

<p>This url should prompt you with an authentication dialog. The default username and password are admin and admin.</p>

<p>== Get clients working ==</p>

<p>CardDAV is a lot newer than CalDAV, and from what we've noticed so far, clients
can be a bit more error-prone.</p>

<p>OS X was one of the first clients to support it (in 10.6). Although the client
has gotten a LOT better, especially the client shipped in 10.6 has a <em>ton</em> of
problems.</p>

<p>Read <a href="dav/clients/osxaddressbook">OSXAddressbook</a> for more information.</p>

<h2>Adding users</h2>

<p>SabreDAV does not provide an administrative interface. While this may happen
in the future, for now SabreDAV is mostly intended for developers. Adding new
users is done directly on the database.</p>

<p>In order to allow a user to log in, add them to the users table. You must also
add them to the principals table to enable addressbook access.</p>

<h2>Related topics</h2>

<ul>
<li><a href="/dav/caldav-carddav-integration-guide">Guide for integrating CalDAV &amp; CardDAV in existing infrastructures</a>.</li>
</ul>
        </article>
    </main>

    <script src="/components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-2848664-5', 'sabredav.org');
ga('send', 'pageview');
</script>

    
</body>
