<!DOCTYPE html!>
<head>

            <title>Evolution - sabre/dav</title>
    
    <link rel="stylesheet" type="text/css" href="/css/sabredav.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:100,700,300,400" type="text/css">
    <link rel="stylesheet" href="/components/highlightjs/styles/github.css" type="text/css" />

    <link rel="shortcut icon" href="/favicon.ico" />

</head>
<body>
    <header>

    <div class="logo">
        <a href="/">
            <img src="/img/logo.png" alt="SabreDAV. A WebDAV framework for PHP.">
            SabreDAV wiki
        </a>
    </div>

    <nav>
        <ul>
            <li><a href="/">sabre/dav</a></li>
            <li><a href="/">sabre/event</a></li>
            <li><a href="/">sabre/http</a></li>
            <li><a href="/">sabre/vobject</a></li>
        </ul>
    </nav>

</header>

    <main>
        <aside>
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/dav/install">Installation</a></li>
        <li><a href="/dav/upgrading">Upgrading</a></li>
        <li><a href="/dav/gettingstarted">Getting Started</a></li>
        <li>
            Troubleshooting
            <ul>
                <li><a href="/dav/faq">FAQ</a></li>
                <li><a href="/dav/clients">Clients</a></li>
                <li><a href="/dav/webservers">Webservers</a></li>
            </ul>
        </li>
        <li>
            CalDAV
            <ul>
                <li><a href="/dav/caldav">Getting started</a></li>
                <li><a href="/dav/building-a-caldav-client">Building a CalDAV client</a></li>
                <li><a href="/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                <li><a href="/dav/caldav-proxy">Delegation</a></li>
                <li><a href="/dav/caldav-sharing">Calendar sharing</a></li>
                <li><a href="/dav/ics-export-plugin">iCalendar export</a></li>
                <li><a href="/dav/imiphandler">iMip Handler</a></li>
                <li><a href="/dav/service-discovery">Service Discovery</a></li>
            </ul>
        </li>
        <li>
            CardDAV
            <ul>
                <li><a href="/dav/carddav">Getting started</a></li>
                <li><a href="/dav/building-a-carddav-client">Building a CardDAV client</a></li>
                <li><a href="/dav/caldav-carddav-integration-guide">Integration guide</a></li>
                <li><a href="/dav/carddav-directory">CardDAV Directory</a></li>
                <li><a href="/dav/vcf-export-plugin">vCard export</a></li>
                <li><a href="/dav/service-discovery">Service Discovery</a></li>
            </ul>
        </li>
        <li>
            Other topics
            <ul>
                <li><a href="/dav/acl">Acl</a></li>
                <li><a href="/dav/authentication">Authentication</a></li>
                <li><a href="/dav/character-encoding">Character encoding</a></li>
                <li><a href="/dav/browser-plugin">Directory indexes</a></li>
                <li><a href="/dav/davmount">DavMount</a></li>
                <li><a href="/dav/guesscontenttype">Content Types</a></li>
                <li><a href="/dav/http-patch">PATCH support</a></li>
                <li><a href="/license">License</a></li>
                <li><a href="/dav/litmus">Litmus</a></li>
                <li><a href="/dav/plugins">Plugins</a></li>
                <li><a href="/dav/scalability">Scalability</a></li>
                <li><a href="/dav/simplecollection">SimpleCollection</a></li>
                <li><a href="/dav/standards-support">Standards Support</a></li>
                <li><a href="/dav/temporary-files">Temporary Files</a></li>
                <li><a href="/dav/versioning">Versioning</a></li>
                <li><a href="/dav/virtual-filesystems">Virtual filesystems</a></li>
                <li><a href="/dav/davclient">WebDAV Client</a></li>
                <li><a href="/dav/xmlelements">XML Elements</a></li>
                <li><a href="/dav/writing-plugins">Writing Plugins</a></li>
            </ul>
        </li>
    </ul>
</aside>
        <article>
                        <h1>Evolution</h1>            <p>Evolution is both a WebDAV client for contacts management (note: NOT CardDAV,
but it is compatible with the SabreDAV CardDAV implementation), and a CalDAV
client for Journals, Calendars and Tasks. Both clients are covered here.</p>

<h2>The Evolution WebDAV client</h2>

<p>The WebDAV client is used for managing addressbooks. It's a very simple client
(just does PROPFIND, GET and PUT). It also supports the use of the 'ctag' for
checking if the addressbook changed at all, and also verifies etags to see
if individual cards updated.</p>

<h3>Debugging</h3>

<p>To enable debugging for this client, make sure evolution is fully stopped,
then restart e-addressbook-factory with the debug mode enabled as such:</p>

<pre><code>export WEBDAV_DEBUG=all
./e-addressbook-factory
</code></pre>

<p>If you start evolution after that, you will see the entire dialog.</p>

<h3>Issues</h3>

<h4>No UID</h4>

<p>When evolution creates new contacts, it does not submit the UID property.
While this is valid for VCards themselves, vcards in CardDAV <em>must</em> have
the property.</p>

<p>Until this issue is fixed, it will not be possible to create new contacts with
evolution.</p>

<p>Reference: <a href="https://bugzilla.gnome.org/show_bug.cgi?id=640594">https://bugzilla.gnome.org/show_bug.cgi?id=640594</a></p>

<p>This issue was fixed in evolution 3.6.2.</p>

<h4>Statuscode</h4>

<p>SabreDAV sent a HTTP 200 Ok statuscode for updating resources with PUT.
Evolution doesn't like this, as it requires 204 No Content if there is no
content in the response body.</p>

<p>This is actually correct per the HTTP standard, but hadn't been the case in
SabreDAV. This was fixed in SabreDAV 1.5.4.</p>

<h2>The Evolution CalDAV client</h2>

<h3>Connecting with evolution</h3>

<p>Connecting to a CalDAV server is done through the "New > Create new calendar"
dialog. In this dialog it is possible to specify a CalDAV location.</p>

<p>The url must be a full url directly to the actual Calendar.  If you need
support for multiple calendars, these will all need to be setup through this
dialog.</p>

<p>To setup TODO lists through Evolution works the exact same (select New tasklist
instead of calendar).</p>

<h3>Technical notes</h3>

<p>Some sample user agents:</p>

<pre><code>Evolution/2.28.1
Evolution/3.2.3
</code></pre>

<p>Evolution makes use of the REPORT query to find all the events and TODO's.
It will start off with finding the ctag though, if the calendar has support
for it.</p>

<pre><code>PROPFIND /~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/ HTTP/1.1
User-Agent: Evolution/2.28.1
Depth: 0
Content-Type: application/xml
Content-Length: 113
Host: localhost:80

&lt;propfind xmlns="DAV:" xmlns:CS="http://calendarserver.org/ns/"&gt;
  &lt;prop&gt;
    &lt;CS:getctag/&gt;
  &lt;/prop&gt;
&lt;/propfind&gt;
</code></pre>

<p>Returning a list of all events in a specific timespan: (note that the exact
same request is made for TODO's, but VEVENT is replaced with VTODO.</p>

<pre><code>REPORT /~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/ HTTP/1.1
User-Agent: Evolution/2.28.1
Depth: 1
Content-Type: application/xml
Content-Length: 349
Host: localhost:80

&lt;C:calendar-query xmlns:C="urn:ietf:params:xml:ns:caldav" xmlns:D="DAV:"&gt;
  &lt;D:prop&gt;
    &lt;D:getetag/&gt;
  &lt;/D:prop&gt;
  &lt;C:filter&gt;
    &lt;C:comp-filter name="VCALENDAR"&gt;
      &lt;C:comp-filter name="VEVENT"&gt;
        &lt;C:time-range start="20091228T060930Z" end="20100308T060930Z"/&gt;
      &lt;/C:comp-filter&gt;
    &lt;/C:comp-filter&gt;
  &lt;/C:filter&gt;
&lt;/C:calendar-query&gt;
</code></pre>

<p>Retrieving a specific list of events/todo's:</p>

<pre><code>REPORT /~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/ HTTP/1.1
User-Agent: Evolution/2.28.1
Depth: 1
Content-Type: application/xml
Content-Length: 726
Host: localhost:80

&lt;C:calendar-multiget xmlns:C="urn:ietf:params:xml:ns:caldav" xmlns:D="DAV:"&gt;
  &lt;D:prop&gt;
    &lt;D:getetag/&gt;
    &lt;C:calendar-data/&gt;
  &lt;/D:prop&gt;
  &lt;D:href&gt;/~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/115570AD-BBC2-4AF8-A206-C35EA5F32B0D.ics&lt;/D:href&gt;
  &lt;D:href&gt;/~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/7E422880-3B9A-4C38-A427-3E49A7DAE7AB.ics&lt;/D:href&gt;
  &lt;D:href&gt;/~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/8721297A-B66F-4B95-B7B2-45A726D00E7C.ics&lt;/D:href&gt;
  &lt;D:href&gt;/~evert2/code/sabredav/acl3/calendars/admin/95D586E4-9E42-4FFF-88BF-3625D45A1B08/1B8B1474-56A7-4012-B9DA-48019D3FB268.ics&lt;/D:href&gt;
&lt;/C:calendar-multiget&gt;
</code></pre>
                    </article>
    </main>

    <script src="/components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-2848664-5', 'sabredav.org');
ga('send', 'pageview');
</script>

    
</body>
