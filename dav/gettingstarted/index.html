<!DOCTYPE html!>
<head>
    <title>sabre/dav</title>

    <link rel="stylesheet" type="text/css" href="/css/sabredav.css" /> 
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:100,700,300,400" type="text/css">
    <link rel="stylesheet" href="/components/highlightjs/styles/github.css" type="text/css" />

</head>
<body>
    <header>

    <div class="logo">
        <a href="/">
            <img src="/img/logo.png" alt="SabreDAV. A WebDAV framework for PHP.">
            SabreDAV wiki
        </a>
    </div>

    <nav>
        <ul>
            <li><a href="/">sabre/dav</a></li>
            <li><a href="/">sabre/event</a></li>
            <li><a href="/">sabre/http</a></li>
            <li><a href="/">sabre/vobject</a></li>
        </ul>
    </nav>

</header>

    <main>
        <aside>
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/dav/install">Installation</a></li>
        <li><a href="/dav/gettingstarted">Getting Started</a></li>
        <li>
            Troubleshooting
            <ul>
                <li><a href="/dav/faq">FAQ</a></li>
                <li><a href="/dav/clients">Clients</a></li>
                <li><a href="/dav/webservers">Webservers</a></li>
            </ul>
        </li>
        <li>
            CalDAV
            <ul>
                <li><a href="/dav/caldav">Getting started</a></li>
                <li><a href="/dav/building-a-caldav-client">Building a CalDAV client</a></li>
                <li><a href="/dav/caldav-proxy">Delegation</a></li>
                <li><a href="/dav/caldav-sharing">Calendar sharing</a></li>
                <li><a href="/dav/ics-export-plugin">iCalendar export</a></li>
                <li><a href="/dav/imiphandler">iMip Handler</a></li>
            </ul>
        </li>
        <li>
            CardDAV
            <ul>
                <li><a href="/dav/carddav">Getting started</a></li>
                <li><a href="/dav/carddav-directory">CardDAV Directory</a></li>
            </ul>
        </li>
        <li>
            Other topics
            <ul>
                <li><a href="/dav/acl">Acl</a></li>
                <li><a href="/dav/authentication">Authentication</a></li>
                <li><a href="/dav/character-encoding">Character encoding</a></li>
                <li><a href="/dav/browser-plugin">Directory indexes</a></li>
                <li><a href="/dav/davmount">DavMount</a></li>
                <li><a href="/dav/guesscontenttype">Content Types</a></li>
                <li><a href="/dav/plugins">Plugins</a></li>
                <li><a href="/dav/scalability">Scalability</a></li>
                <li><a href="/dav/versioning">Versioning</a></li>
                <li><a href="/dav/virtual-filesystems">Virtual filesystems</a></li>
            </ul>
        </li>
    </ul>
</aside>
        <article>
            <h1>Getting Started</h1>

<p>This is a basic tutorial that will help you create a simple fileserver.</p>

<p>Before starting this tutorial, make sure you have completed the
<a href="/dav/installation">Installation</a> steps.</p>

<p>We're assuming that your current working directory looks like this:</p>

<pre><code>./
../
vendor/
composer.json
composer.lock
</code></pre>

<p>If you use the (manual) zip installation, these files do not exist.
In that case we <em>just</em> assume that there is a sabredav directory somewhere,
and that sabredav directory has a <code>vendor/</code> directory, containing a file
called <code>autoload.php</code>. It doesn't really matter where this directory is.</p>

<h2>A simple server</h2>

<p>First, create a <code>data</code> and a <code>public</code> directory:</p>

<pre><code>mkdir data
mkdir public
</code></pre>

<p>We will use the <code>public</code> directory to store all the files on the webdav
server.</p>

<p>The <code>data</code> directory contains other information SabreDAV needs.</p>

<p>Now we're making both world-writable:</p>

<pre><code>chmod a+rwx data public
</code></pre>

<p>Next, create a file called <code>server.php</code>, and enter the following:</p>

<pre><code>&lt;?php

use
    Sabre\DAV;

// The autoloader
require 'vendor/autoload.php';

// Now we're creating a whole bunch of objects
$rootDirectory = new DAV\FS\Directory('public');

// The server object is responsible for making sense out of the WebDAV protocol
$server = new DAV\Server($rootDirectory);

// If your server is not on your webroot, make sure the following line has the
// correct information
$server-&gt;setBaseUri('/url/to/server.php');

// The lock manager is reponsible for making sure users don't overwrite
// each others changes.
$lockBackend = new DAV\Locks\Backend\File('data/locks');
$lockPlugin = new DAV\Locks\Plugin($lockBackend);
$server-&gt;addPlugin($lockPlugin);

// This ensures that we get a pretty index in the browser, but it is
// optional.
$server-&gt;addPlugin(new DAV\Browser\Plugin());

// All we need to do now, is to fire up the server
$server-&gt;exec();

?&gt;
</code></pre>

<h2>The base url</h2>

<p>One line in the last code block has been a cause for a lot of confusion,
so it's important to get it right.</p>

<p>We're talking about this line:</p>

<pre><code>$server-&gt;setBaseUri('/url/to/server.php');
</code></pre>

<p>This path needs to point exactly to the server script. To find out what this
should be, try to open server.php in your browser, and simply strip off the
protocol and domainname.</p>

<p>So if this is how you access sabredav:</p>

<pre><code>http://mydomain/sabredav/server.php
</code></pre>

<p>Then your base url would be:</p>

<pre><code>/sabredav/server.php
</code></pre>

<p>If you want a prettier url, you <em>must</em> use mod_rewrite or some other rewriting
system.</p>

<h2>Testing</h2>

<p>After you got the base url correctly, you will want to see if it's working.
An easy first step is to just open the server in the browser.</p>

<p>If everything was done correctly, you should see a screen similar to the
following:</p>

<p><img src="/img/gettingstarted_1.png" alt="Successful setup" /></p>

<h2>Client setup</h2>

<p>Next, you will want to start testing with a WebDAV client, to see if things
are working as expected.</p>

<h2>Troubleshooting</h2>

<p>Unlike with regular PHP web applications, it can sometimes be hard to figure
out what's wrong. Error messages are often not displayed by webdav clients,
so the only debugging feedback you're getting is a cryptic error.</p>

<p>Aside from inspecting your server in a web browser, and keeping an eye on
the php error log, we can highly recommend using a debugging proxy.</p>

<p>If your application emits an error, the debugging proxy is <em>the</em> tool to
reveal it.</p>

<p>Some tools:</p>

<ul>
<li><a href="http://www.charlesproxy.com/">Charles</a> is an easy to use GUI proxy tool for every operating system.
It's not free, but the free trial is available and runs long enough to
get your started.</li>
<li><a href="http://mitmproxy.org/">mitmproxy</a> is open source, runs in the cli and written in python. It's
not as user-friendly, so we recommend only getting started with this after
you're already a bit more comfortable with the rest of the toolset.</li>
</ul>

<h2>Next steps</h2>

<ul>
<li>Add <a href="/dav/authentication">authentication</a> to your server.</li>
<li>Read about <a href="/dav/virtualfilesystems">virtual filesystems</a> and how you can
create your own.</li>
<li>The <a href="/dav/temporary-file-filter-plugin">temporary file filter plugin</a> can
intercept those pesky <code>.DS_Store</code> and <code>desktop.ini</code> files.</li>
<li><a href="/dav/caldav">CalDAV</a>.</li>
<li><a href="/dav/carddav">CardDAV</a>.</li>
</ul>
        </article>
    </main>

    <script src="/components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-2848664-5', 'sabredav.org');
ga('send', 'pageview');
</script>

    
</body>
